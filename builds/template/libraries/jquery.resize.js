"use strict";(function(){if($.event.special.resize)return;if($.fn.off.elementResizeOriginalOff)return;var expando={index:0,check:function(element){var hasExpando=element[$.expando];if(hasExpando)return;element[$.expando]=++expando.index},make:function(element,data){expando.check(element);return data.guid+"-"+element[$.expando]}};var handlers={registered:[],shouldReProcess:true,register:function(element,data){var $element=$(element);handlers.registered.push({id:expando.make(element,data),$element:$element,_measurement:measurements.get($element).uniqueMeasurementId,_hasTriggered:false});handlers.shouldReProcess=true},unregister:function(element,data){var registered=handlers.registered;var findId=expando.make(element,data);for(var i=registered.length-1,l=-1;i>l;i--){var item=registered[i];if(item.id!=findId)continue;registered.splice(i,1);handlers.shouldReProcess=true}},process:function(){var registered=handlers.registered;var registeredCount;handlers.shouldReProcess=true;while(handlers.shouldReProcess){handlers.shouldReProcess=false;registeredCount=registered.length;if(registeredCount==0)return;for(var i=0;i<registeredCount;i++){var item=registered[i];var measure=measurements.get(item.$element);var wasPreviouslyMeasured=item._measurement!==undefined;if(wasPreviouslyMeasured&&item._hasTriggered){var hasMeasureChanged=item._measurement!=measure.uniqueMeasurementId;if(!hasMeasureChanged){continue}}item._measurement=measure.uniqueMeasurementId;item._hasTriggered=true;handlers.trigger(item);if(handlers.shouldReProcess){break}}}},trigger:function triggerResize(item){item.$element.trigger("resize")}};var loop={lastStartEvent:0,timeoutHandle:null,intervalDuration:100,hasRaf:false,start:function(){loop.lastStartEvent=(new Date).getTime();loop.repeat()},force:function(){loop.lastStartEvent=(new Date).getTime();loop.main(true);loop.repeat()},repeat:function(){loop.stop();if(loop.hasRaf){loop.timeoutHandle=requestAnimationFrame(loop.main)}else{loop.timeoutHandle=setTimeout(loop.main,loop.intervalDuration)}},hasExpired:function(){var timeSinceLast=(new Date).getTime()-loop.lastStartEvent;if(timeSinceLast<1500)return;loop.stop();return true},lastMain:(new Date).getTime(),isThrottled:function(){var passedTime=(new Date).getTime()-loop.lastMain;if(passedTime>loop.intervalDuration)return false;return true},main:function(force){if(force!==true&&loop.isThrottled()){loop.repeat();return}loop.lastMain=(new Date).getTime();if(force!==true&&loop.hasExpired()){loop.stop();return}if(handlers.registered.length==0){loop.stop();loop.intervalDuration=200;loop.repeat()}else{loop.stop();loop.intervalDuration=100;loop.repeat()}handlers.process()},stop:function(){var intervalAttached=loop.timeoutHandle!==null;if(!intervalAttached)return;if(loop.hasRaf){cancelAnimationFrame(loop.timeoutHandle);loop.timeoutHandle=null}else{clearTimeout(loop.timeoutHandle);loop.timeoutHandle=null}}};$.extend($.event.special,{resize:{noBubble:true,add:function(data){if(this===window)return;handlers.register(this,data)},remove:function(data){if(this===window)return;handlers.unregister(this,data)}}});var measurements={featureDetect:function(){loop.hasRaf=window.requestAnimationFrame&&window.cancelAnimationFrame},get:function($element){var element=$element[0];var height=element.clientHeight;var width=element.clientWidth;return{uniqueMeasurementId:height+","+width}}};$(window).on({"touchmove scroll mousedown keydown":loop.start,resize:loop.force});$(measurements.featureDetect)})();